<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, user-scalable=0">
  <title>ZH Bible Verse Memorizer | åœ£ç»ç»æ–‡èƒŒè¯µ</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Theme color -->
  <meta name="theme-color" content="#2d72d9">
  
  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192x192.png">
  
  <!-- iOS specific -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ZH åœ£ç»èƒŒè¯µ">
  
  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-192x192.png">
  <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-192x192.png">
  
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <h1>ZH Bible Verse Memorizer<br>åœ£ç»ç»æ–‡èƒŒè¯µ</h1>
    <div class="nav-buttons">
      <button id="addVerseBtn" data-i18n="add_verse">Add Verse</button>
      <button id="learnBtn" data-i18n="learn">Learn</button>
      <button id="collectionsBtn" data-i18n="collections">Collections</button>
      <button id="reviewBtn" data-i18n="review" style="display:none;">Review<span id="reviewBadge" class="badge" style="display:none;"></span></button>
      <button id="exportBtn" data-i18n="export_import">Export & Import</button>
      <button id="settingsBtn" title="Settings">âš™ï¸ <span data-i18n="settings">Settings</span></button>
    </div>
<div id="addVersePanel" class="panel" style="display:none;">
  <h2 data-i18n="add_verse_title">Add Verse</h2>
  
  <div class="verse-input-section">
    <div class="reference-inputs">
      <div class="input-group" style="position:relative;">
        <label for="bookNameInput" data-i18n="chinese_book_name">Chinese Book Name</label>
        <input id="bookNameInput" type="text" name="off" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="none">
        <div id="bookSuggestions" class="autocomplete-suggestions"></div>
      </div>
      
      <div class="input-row">
        <div class="input-group half">
          <label for="chapterNumber" data-i18n="chapter">Chapter</label>
          <input id="chapterNumber" type="text" pattern="[0-9]*" min="1" autocomplete="off" inputmode="none">
        </div>
        <div class="input-group half">
          <label for="verseNumber" data-i18n="verse">Verse</label>
          <input id="verseNumber" type="text" pattern="[0-9]*" min="1" autocomplete="off" inputmode="none">
        </div>
      </div>
    </div>
    
    <label for="verseText" data-i18n="chinese_verse_text">Chinese Verse Text</label>
    <textarea id="verseText" rows="3" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="none"></textarea>
    
    <div class="pinyin-inputs">
      <div class="input-group">
        <label for="verseInitials">Pinyin Initials for Verse</label>
        <input id="verseInitials" type="text" name="off" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="none" inputmode="none">
        <small class="helper-text">Type the first letter of each character's pinyin</small>
      </div>
      
      <div class="input-group">
        <label for="bookInitials">Pinyin Initials for Book Name</label>
        <input id="bookInitials" type="text" name="off" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="none" inputmode="none">
      </div>
    </div>
  </div>

  <div id="saveStatus"></div>

  <div class="input-group">
    <label for="bibleVersion" data-i18n="bible_version_optional">Bible version (optional)</label>
    <input id="bibleVersion" type="text" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="none" placeholder="">
  </div>

  <div class="input-group">
    <label for="addToCollectionSelect" data-i18n="add_to_collection_optional">Add to collection (optional)</label>
    <select id="addToCollectionSelect">
      <option value="" data-i18n="none">(none)</option>
    </select>
  </div>

  <div class="action-buttons">
    <button id="saveVerseBtn" data-i18n="save_verse">Save Verse</button>
    <button id="clearFormBtn" data-i18n="clear_form">Clear Form</button>
  </div>

  <div id="addVerseList" class="verse-list"></div>

  <div id="bulkActions" style="display:none; margin-top:10px;">
    <button id="bulkAddToCollectionBtn" data-i18n="add_selected_to_collection">Add selected to collection</button>
    <button id="bulkDeleteBtn" data-i18n="delete_selected">Delete selected</button>
  </div>
</div>
<div id="learnPanel" class="panel" style="display:none;">
  <h2 id="learnModeLabel" data-i18n="learn_mode">Learn Mode</h2>

  <div id="difficultyControls" class="difficulty-controls">
    <button id="basicMode" class="mode-btn active" data-i18n="basic">Basic</button>
    <button id="intermediateMode" class="mode-btn" data-i18n="intermediate">Intermediate</button>
    <button id="advancedMode" class="mode-btn" data-i18n="advanced">Advanced</button>
  </div>
  
    <div class="learning-controls">
    <label id="verseSelectorLabel" for="verseSelector" data-i18n="select_verse">Select Verse</label>
    <div class="selector-row">
      <select id="verseSelector"></select>
      <button id="muteToggle" class="mute-btn" aria-pressed="true" title="Toggle sound">ğŸ”‡ <span data-i18n="sound_off">Sound Off</span></button>
    </div>
  </div>

  <div id="learnHelperText" class="learn-helper-text"></div>
  <div id="learnVerseDisplay" class="verse-display"></div>

  <div class="input-section">
    <input id="learnInput" type="text" 
           name="off"
           autocomplete="off" 
           autocorrect="off"
           spellcheck="false"
           autocapitalize="none"
           placeholder=""
           class="visually-hidden-input" />
    <div id="learnFeedback"></div>
    <div id="progressDisplay"></div>
  </div>

  <div class="control-buttons">
    <button id="learnRetryBtn" style="display:none;" data-i18n="retry">Retry</button>
    <button id="learnNextBtn" style="display:none;" data-i18n="next">Next</button>
  </div>
  <!-- Accuracy modal -->
  <div id="accuracyModal" class="modal" aria-hidden="true">
    <div class="modal-overlay"></div>
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle" data-i18n="result">Result</h3>
      <div id="modalMessage" class="modal-message"></div>
      <div id="modalAccuracy" class="modal-accuracy"></div>
      <div class="modal-buttons">
        <button id="modalRetryBtn" data-i18n="retry">Retry</button>
        <button id="modalNextBtn" data-i18n="next">Next</button>
      </div>
    </div>
  </div>
  <div id="review-type-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-content">
        <p id="review-type-message" class="modal-message"></p>

        <div class="modal-actions">
            <button id="review-type-single-btn" class="btn btn-primary"></button>

            <button id="review-type-individual-btn" class="btn btn-secondary"></button>
        </div>
        
        </div>
  </div>
</div>

  <div id="reviewPanel" class="panel" style="display:none;">
  <h2 data-i18n="review_mode">Review Mode</h2>
  <div style="margin-bottom: 16px;">
    <button id="reviewDueBtn" data-i18n="review_due_verses" style="background: #d32f2f; display: none;">Review Due Verses</button>
  </div>
  <div class="collection-review">
    <label data-i18n="select_collection">Select a collection</label>
    <div id="reviewCollectionsList" class="verse-list"></div>
    <div style="margin-top:8px;">
      <button id="reviewCollectionBtn" data-i18n="review_collection_learned">Review Collection (learned only)</button>
    </div>
  </div>
  <label for="reviewVerseList" data-i18n="or_select_individual">Or select individual verses</label>
  <div id="reviewVerseList" class="verse-list"></div>
  <div class="review-controls">
    <button id="startReviewBtn" data-i18n="review_verses">Review verses</button>
    <button id="changeIntervalBtn" data-i18n="change_interval">Change Review Interval</button>
    <div id="reviewProgress"></div>
  </div>
</div>

<div id="collectionsPanel" class="panel" style="display:none;">
  <h2 data-i18n="collections_title">Collections</h2>
  <div class="create-collection">
    <label for="newCollectionTitle" data-i18n="new_collection_title">New Collection Title</label>
    <input id="newCollectionTitle" type="text" />
    <button id="createCollectionBtn" data-i18n="create_collection">Create Collection</button>
  </div>
  <div id="collectionsList" class="verse-list" style="margin-top:16px;"></div>

  <div id="collectionDetail" style="display:none; margin-top:12px;">
    <h3 id="collectionDetailTitle"></h3>
    <label for="addVerseToCollection">Add verse to collection</label>
    <select id="addVerseToCollection"></select>
    <button id="addToCollectionBtn" data-i18n="add">Add</button>
    <div id="collectionVerses" class="verse-list" style="margin-top:12px;"></div>
  </div>
</div>

<div id="exportImportPanel" class="panel" style="display:none;">
  <h2 data-i18n="export_import_title">Export & Import</h2>
  <div class="export-section">
    <div class="input-group">
      <label data-i18n="select_export">Select what to export</label>
      <div id="exportSelectionTree" class="export-tree">
        <div class="tree-item">
          <label>
            <input type="checkbox" id="exportAllVerses" checked>
            <strong data-i18n="all_verses">All verses</strong>
          </label>
          <div id="exportCollectionsList" class="tree-children"></div>
        </div>
      </div>
    </div>
    <div class="input-group" style="margin-top:8px;">
      <label>
        <input type="checkbox" id="exportIncludeReview" checked>
        <span data-i18n="include_review_data">Include review data (last reviewed, due dates)</span>
      </label>
    </div>
    <div class="input-group" style="margin-top:8px;">
      <label>
        <input type="checkbox" id="exportIncludeCollections" checked>
        <span data-i18n="include_collection_data">Include collection data (titles, verse order)</span>
      </label>
    </div>
    <button id="downloadBtn" style="margin-top:10px;" data-i18n="download_data">Download Data</button>
  </div>
  <div class="import-section">
    <label for="importFile" class="file-input-label">
      <span id="importFileLabel" data-i18n="choose_file">Choose File</span>
    </label>
    <input type="file" id="importFile" accept=".json" style="display:none;" />
    <div id="importFileName" class="file-name-display" data-i18n="no_file_selected">No file selected</div>
    <div class="input-group" style="margin-top:8px;">
      <label>
        <input type="checkbox" id="importIncludeReview" checked>
        <span data-i18n="import_review_data">Import review data (last reviewed, due dates)</span>
      </label>
    </div>
    <div class="input-group" style="margin-top:8px;">
      <label>
        <input type="checkbox" id="importIncludeCollections" checked>
        <span data-i18n="import_collection_data">Import collection data (titles, verse order)</span>
      </label>
    </div>
    <button id="importDataBtn" style="margin-top:10px;" data-i18n="import_data">Import Data</button>
  </div>
</div>

<!-- Bulk-add modal used by Add Verse panel bulk actions -->
<div id="bulkAddModal" class="modal" aria-hidden="true" style="display:none;">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h3 data-i18n="add_selected_to_collection">Add selected to collection</h3>
    <div>
      <label for="bulkAddCollectionSelect" data-i18n="choose_collection">Choose collection</label>
      <select id="bulkAddCollectionSelect"></select>
    </div>
    <div id="bulkCreateNew" style="display:none; margin-top:8px;">
      <label for="bulkNewCollectionName" data-i18n="new_collection_name">New collection name</label>
      <input id="bulkNewCollectionName" type="text" />
    </div>
    <div style="margin-top:12px;">
      <button id="bulkAddConfirmBtn" data-i18n="confirm">Confirm</button>
      <button id="bulkAddCancelBtn" data-i18n="cancel">Cancel</button>
    </div>
  </div>
</div>

  </div>
  <!-- Settings Panel (panel style like others) -->
  <div id="settingsPanel" class="panel" style="display:none;">
    <h2 data-i18n="settings">Settings</h2>
    <div class="input-group">
      <label data-i18n="theme">Theme</label>
      <div>
        <label><input type="radio" name="themeOption" value="system" checked> <span data-i18n="theme_system">System</span></label>
      </div>
      <div>
        <label><input type="radio" name="themeOption" value="light"> <span data-i18n="theme_light">Light</span></label>
      </div>
      <div>
        <label><input type="radio" name="themeOption" value="dark"> <span data-i18n="theme_dark">Dark</span></label>
      </div>
    </div>
    <div class="input-group">
      <label data-i18n-special="language_label">Language / è¯­è¨€</label>
      <div>
        <label><input type="radio" name="languageOption" value="english" checked> <span data-i18n-special="lang_english">English</span></label>
      </div>
      <div>
        <label><input type="radio" name="languageOption" value="simplified"> <span data-i18n-special="lang_simplified">Simplified / ç®€ä½“</span></label>
      </div>
      <div>
        <label><input type="radio" name="languageOption" value="traditional"> <span data-i18n-special="lang_traditional">Traditional / ç¹é«”</span></label>
      </div>
    </div>
    <div class="input-group">
      <label data-i18n="input_method">Input Method</label>
      <div>
        <label><input type="radio" name="inputMethodOption" value="pinyin" checked> <span data-i18n="input_pinyin">Pinyin</span></label>
      </div>
      <div>
        <label><input type="radio" name="inputMethodOption" value="zhuyin"> <span data-i18n="input_zhuyin">Zhuyin (æ³¨éŸ³)</span></label>
      </div>
      <div>
        <label><input type="radio" name="inputMethodOption" value="cangjie"> <span data-i18n="input_cangjie">Cangjie (å€‰é ¡)</span></label>
      </div>
    </div>
    <div class="input-group">
      <label data-i18n="vibration_feedback">Vibration Feedback</label>
      <div>
        <label><input type="checkbox" id="vibrationToggle"> <span data-i18n="enable_vibration">Enable vibration on error</span></label>
      </div>
      <p style="font-size: 0.85em; color: var(--text-secondary); margin: 4px 0 0 0;">
        <span data-i18n="vibration_note">Note: Vibration is only available on Android devices.</span>
      </p>
    </div>
    <div class="input-group">
      <label data-i18n="backup_reminders">Backup Reminders</label>
      <div>
        <label><input type="checkbox" id="backupReminderToggle" checked> <span data-i18n="enable_backup_reminders">Enable periodic backup reminders</span></label>
      </div>
      <p style="font-size: 0.85em; color: var(--text-secondary); margin: 4px 0 0 0;">
        <span data-i18n="backup_reminder_frequency">Reminds you to export your data weekly (first month) then monthly</span>
      </p>
    </div>
    <div class="input-group">
      <label for="defaultBibleVersion" data-i18n="default_bible_version">Default Bible Version</label>
      <input id="defaultBibleVersion" type="text" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="none" placeholder="">
    </div>
    <div class="input-group" style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border-color);">
      <label data-i18n="check_for_updates">Check for Updates</label>
      <p style="font-size: 0.9em; color: var(--text-secondary); margin: 8px 0;">
        <span data-i18n="update_description">Check if a new version of the app is available.</span>
      </p>
      <button id="checkUpdateBtn" data-i18n="check_update_btn">Check for Updates</button>
      <p id="updateStatus" style="font-size: 0.85em; color: var(--text-secondary); margin: 8px 0 0 0; display: none;"></p>
    </div>
    <div class="input-group" style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border-color);">
      <label data-i18n="clear_all_data">Clear All Data</label>
      <p style="font-size: 0.9em; color: var(--text-secondary); margin: 8px 0;">
        <span data-i18n="clear_data_warning">This will permanently delete all verses, collections, and review data from this device.</span>
      </p>
      <button id="clearDataBtn" style="background-color: #dc3545; color: white;" data-i18n="clear_all_data_btn">Clear All Data</button>
    </div>
    <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border-color); text-align: center; font-size: 0.85em; color: var(--text-secondary);">
      <div style="margin-bottom: 4px;">ZH Bible Verse Memorizer PWA (Version 0.9.2)</div>
      <div>Copyright Â© 2025 TzIsf62C</div>
    </div>
  </div>

  <!-- Onscreen Keyboards -->
  <div id="zhuyinKeyboard" class="onscreen-keyboard" style="display:none;">
    <div class="keyboard-row">
      <button class="key">ã„…</button>
      <button class="key">ã„‰</button>
      <button class="key">Ë‡</button>
      <button class="key">Ë‹</button>
      <button class="key">ã„“</button>
      <button class="key">ËŠ</button>
      <button class="key">Ë™</button>
      <button class="key">ã„š</button>
      <button class="key">ã„</button>
      <button class="key">ã„¢</button>
      <button class="key">ã„¦</button>
    </div>
    <div class="keyboard-row">
      <button class="key">ã„†</button>
      <button class="key">ã„Š</button>
      <button class="key">ã„</button>
      <button class="key">ã„</button>
      <button class="key">ã„”</button>
      <button class="key">ã„—</button>
      <button class="key">ã„§</button>
      <button class="key">ã„›</button>
      <button class="key">ã„Ÿ</button>
      <button class="key">ã„£</button>
    </div>
    <div class="keyboard-row">
      <button class="key">ã„‡</button>
      <button class="key">ã„‹</button>
      <button class="key">ã„</button>
      <button class="key">ã„‘</button>
      <button class="key">ã„•</button>
      <button class="key">ã„˜</button>
      <button class="key">ã„¨</button>
      <button class="key">ã„œ</button>
      <button class="key">ã„ </button>
      <button class="key">ã„¤</button>
    </div>
    <div class="keyboard-row">
      <button class="key">ã„ˆ</button>
      <button class="key">ã„Œ</button>
      <button class="key">ã„</button>
      <button class="key">ã„’</button>
      <button class="key">ã„–</button>
      <button class="key">ã„™</button>
      <button class="key">ã„©</button>
      <button class="key">ã„</button>
      <button class="key">ã„¡</button>
      <button class="key">ã„¥</button>
      <button class="key backspace">âŒ«</button>
    </div>
    <div class="keyboard-row">
      <button class="key enter">âœ”</button>
    </div>
  </div>

  <div id="cangjieKeyboard" class="onscreen-keyboard" style="display:none;">
    <div class="keyboard-row">
      <button class="key">æ‰‹</button>
      <button class="key">ç”°</button>
      <button class="key">æ°´</button>
      <button class="key">å£</button>
      <button class="key">å»¿</button>
      <button class="key">åœ</button>
      <button class="key">å±±</button>
      <button class="key">æˆˆ</button>
      <button class="key">äºº</button>
      <button class="key">å¿ƒ</button>
    </div>
    <div class="keyboard-row">
      <button class="key">æ—¥</button>
      <button class="key">å°¸</button>
      <button class="key">æœ¨</button>
      <button class="key">ç«</button>
      <button class="key">åœŸ</button>
      <button class="key">ç«¹</button>
      <button class="key">å</button>
      <button class="key">å¤§</button>
      <button class="key">ä¸­</button>
    </div>
    <div class="keyboard-row">
      <button class="key">é‡</button>
      <button class="key">é›£</button>
      <button class="key">é‡‘</button>
      <button class="key">å¥³</button>
      <button class="key">æœˆ</button>
      <button class="key">å¼“</button>
      <button class="key">ä¸€</button>
      <button class="key backspace">âŒ«</button>
    </div>
    <div class="keyboard-row">
      <button class="key enter">âœ”</button>
    </div>
  </div>

  <div id="pinyinKeyboard" class="onscreen-keyboard" style="display:none;">
    <div class="keyboard-row">
      <button class="key">q</button>
      <button class="key">w</button>
      <button class="key">e</button>
      <button class="key">r</button>
      <button class="key">t</button>
      <button class="key">y</button>
      <button class="key">u</button>
      <button class="key">i</button>
      <button class="key">o</button>
      <button class="key">p</button>
    </div>
    <div class="keyboard-row">
      <button class="key">a</button>
      <button class="key">s</button>
      <button class="key">d</button>
      <button class="key">f</button>
      <button class="key">g</button>
      <button class="key">h</button>
      <button class="key">j</button>
      <button class="key">k</button>
      <button class="key">l</button>
    </div>
    <div class="keyboard-row">
      <button class="key">z</button>
      <button class="key">x</button>
      <button class="key">c</button>
      <button class="key">v</button>
      <button class="key">b</button>
      <button class="key">n</button>
      <button class="key">m</button>
      <button class="key backspace">âŒ«</button>
    </div>
    <div class="keyboard-row">
      <button class="key enter">âœ”</button>
    </div>
  </div>

  <div id="numericKeyboard" class="onscreen-keyboard" style="display:none;">
    <div class="keyboard-row">
      <button class="key">1</button>
      <button class="key">2</button>
      <button class="key">3</button>
    </div>
    <div class="keyboard-row">
      <button class="key">4</button>
      <button class="key">5</button>
      <button class="key">6</button>
    </div>
    <div class="keyboard-row">
      <button class="key">7</button>
      <button class="key">8</button>
      <button class="key">9</button>
    </div>
    <div class="keyboard-row">
      <button class="key backspace">âŒ«</button>
      <button class="key">0</button>
      <button class="key enter">âœ”</button>
    </div>
  </div>

  <script src="script.js"></script>
  
  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then((registration) => {
            console.log('ServiceWorker registration successful:', registration.scope);
          })
          .catch((error) => {
            console.log('ServiceWorker registration failed:', error);
          });
      });
    }
  </script>
  
<!-- Review Mode Selection Modal -->
<div id="reviewModeModal" class="modal" aria-hidden="true">
  <div class="modal-content">
    <h2 data-i18n="choose_review_mode">Choose Review Mode</h2>
    <button id="reviewIndividuallyBtn" data-i18n="review_individually">Review verses individually</button>
    <button id="reviewSingleTextBtn" data-i18n="review_single_text">Review as a single text</button>
  </div>
</div>
<!-- End Review Mode Selection Modal -->

<!-- Individual Review Order Modal -->
<div id="reviewOrderModal" class="modal" aria-hidden="true">
  <div class="modal-content">
    <h2 data-i18n="choose_review_order">Choose Review Order</h2>
    <button id="reviewOrderBiblicalBtn" data-i18n="order_biblical">Biblical Order</button>
    <button id="reviewOrderDueDateBtn" data-i18n="order_due_date">By Due Date</button>
    <button id="reviewOrderRandomBtn" data-i18n="order_random">Random Order</button>
  </div>
</div>
<!-- End Individual Review Order Modal -->

<!-- Reset Review Data Modal -->
<div id="resetReviewDataModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h3 data-i18n="reset_review_data_title">Reset Review Data?</h3>
    <p data-i18n="reset_review_data_message">This verse has existing review history. Would you like to reset the review data?</p>
    <div class="modal-buttons">
      <button id="resetReviewYesBtn" data-i18n="yes">Yes</button>
      <button id="resetReviewNoBtn" data-i18n="no">No</button>
    </div>
  </div>
</div>
<!-- End Reset Review Data Modal -->

<!-- Onboarding Modals -->
<div id="onboardingLanguageModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <img src="icons/icon-192x192.png" alt="App Icon" style="width: 80px; height: 80px; margin: 0 auto 16px; display: block;">
    <div style="text-align: center; margin-bottom: 24px;">
      <div style="font-size: 18px; font-weight: 600; margin-bottom: 4px;">ZH Bible Verse Memorizer</div>
      <div style="font-size: 16px; color: var(--text-secondary);">è–ç¶“ç¶“æ–‡èƒŒèª¦ V0.9.2</div>
    </div>
    <h2>Set Language<br>è®¾å®šè¯­è¨€ / è¨­å®šèªè¨€</h2>
    <div class="onboarding-options">
      <button id="onboardingLangEnglish" class="onboarding-btn" data-lang="english">English</button>
      <button id="onboardingLangSimplified" class="onboarding-btn" data-lang="simplified">ç®€ä½“ä¸­æ–‡</button>
      <button id="onboardingLangTraditional" class="onboarding-btn" data-lang="traditional">ç¹é«”ä¸­æ–‡</button>
    </div>
  </div>
</div>

<div id="onboardingInstallModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h2 id="onboardingInstallTitle" data-i18n="install_app_title">Install App</h2>
    <div id="onboardingInstallInstructions" style="margin: 20px 0; line-height: 1.6;"></div>
    <div class="onboarding-options">
      <button id="onboardingInstallSkip" class="onboarding-btn" data-i18n="skip">Skip</button>
    </div>
  </div>
</div>

<div id="onboardingInputMethodModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h2 id="onboardingInputMethodTitle"></h2>
    <div class="onboarding-options">
      <button id="onboardingInputPinyin" class="onboarding-btn" data-method="pinyin" data-i18n="input_pinyin">Pinyin</button>
      <button id="onboardingInputZhuyin" class="onboarding-btn" data-method="zhuyin" data-i18n="input_zhuyin">Zhuyin (æ³¨éŸ³)</button>
      <button id="onboardingInputCangjie" class="onboarding-btn" data-method="cangjie" data-i18n="input_cangjie">Cangjie (å€‰é ¡)</button>
    </div>
  </div>
</div>
<!-- End Onboarding Modals -->

<!-- Learning Mode Tutorial Modals -->
<div id="tutorialIntroModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h2 id="tutorialIntroTitle" data-i18n="tutorial_intro_title">Learning Method</h2>
    <p id="tutorialIntroDesc" data-i18n="tutorial_intro_desc">This app uses a three-stage memorization method to help you learn Bible verses:</p>
    
    <div class="tutorial-stages-list">
      <div class="tutorial-stage-item">
        <div class="tutorial-stage-number">1</div>
        <div class="tutorial-stage-info">
          <h3 data-i18n="basic">Basic</h3>
          <p data-i18n="tutorial_intro_basic">Full text visible with hints</p>
        </div>
      </div>
      <div class="tutorial-stage-item">
        <div class="tutorial-stage-number">2</div>
        <div class="tutorial-stage-info">
          <h3 data-i18n="intermediate">Intermediate</h3>
          <p data-i18n="tutorial_intro_intermediate">Every other character hidden</p>
        </div>
      </div>
      <div class="tutorial-stage-item">
        <div class="tutorial-stage-number">3</div>
        <div class="tutorial-stage-info">
          <h3 data-i18n="advanced">Advanced</h3>
          <p data-i18n="tutorial_intro_advanced">Pure recall with no hints</p>
        </div>
      </div>
    </div>
    
    <div class="onboarding-options">
      <button id="tutorialIntroStart" class="onboarding-btn tutorial-start-btn" data-i18n="tutorial_start">Start Tutorial</button>
      <button id="tutorialIntroSkip" class="onboarding-btn" data-i18n="skip">Skip</button>
    </div>
  </div>
</div>

<div id="tutorialBasicModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h2 id="tutorialBasicTitle" data-i18n="tutorial_basic_title">Basic Stage</h2>
    <p id="tutorialBasicDesc" data-i18n="tutorial_basic_desc">The verse text is fully displayed. Type the first key for each character according to your input method.</p>
    
    <div class="tutorial-example">
      <div id="tutorialBasicChars" class="tutorial-chars">
        <span class="tutorial-char" data-index="0">è€¶</span>
        <span class="tutorial-char" data-index="1">å’Œ</span>
        <span class="tutorial-char" data-index="2">è¯</span>
        <span class="tutorial-char" data-index="3">æœ‰</span>
        <span class="tutorial-char" data-index="4">æ©</span>
        <span class="tutorial-char" data-index="5">æƒ </span>
      </div>
      <div class="tutorial-arrows">
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
      </div>
      <div id="tutorialBasicKeys" class="tutorial-keys"></div>
    </div>
    
    <p id="tutorialBasicNote" data-i18n="tutorial_basic_note">Characters will change color as you type.</p>
    <div class="onboarding-options">
      <button id="tutorialBasicContinue" class="onboarding-btn" data-i18n="continue">Continue</button>
    </div>
  </div>
</div>

<div id="tutorialIntermediateModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h2 id="tutorialIntermediateTitle" data-i18n="tutorial_intermediate_title">Intermediate Stage</h2>
    <p id="tutorialIntermediateDesc" data-i18n="tutorial_intermediate_desc">Every other character is hidden. Type a key for each character, even the hidden ones. They will appear as you type.</p>
    
    <div class="tutorial-example">
      <div id="tutorialIntermediateChars" class="tutorial-chars">
        <span class="tutorial-char" data-index="0">è€¶</span>
        <span class="tutorial-char tutorial-hidden" data-index="1">å’Œ</span>
        <span class="tutorial-char" data-index="2">è¯</span>
        <span class="tutorial-char tutorial-hidden" data-index="3">æœ‰</span>
        <span class="tutorial-char" data-index="4">æ©</span>
        <span class="tutorial-char tutorial-hidden" data-index="5">æƒ </span>
      </div>
      <div class="tutorial-arrows">
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
      </div>
      <div id="tutorialIntermediateKeys" class="tutorial-keys"></div>
    </div>
    
    <div class="onboarding-options">
      <button id="tutorialIntermediateContinue" class="onboarding-btn" data-i18n="continue">Continue</button>
    </div>
  </div>
</div>

<div id="tutorialAdvancedModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h2 id="tutorialAdvancedTitle" data-i18n="tutorial_advanced_title">Advanced Stage</h2>
    <p id="tutorialAdvancedDesc" data-i18n="tutorial_advanced_desc">No text is shown. The characters will appear as you type the correct keys.</p>
    

    
    <div class="tutorial-example">
      <div id="tutorialAdvancedChars" class="tutorial-chars">
        <span class="tutorial-char tutorial-hidden" data-index="0">è€¶</span>
        <span class="tutorial-char tutorial-hidden" data-index="1">å’Œ</span>
        <span class="tutorial-char tutorial-hidden" data-index="2">è¯</span>
        <span class="tutorial-char tutorial-hidden" data-index="3">æœ‰</span>
        <span class="tutorial-char tutorial-hidden" data-index="4">æ©</span>
        <span class="tutorial-char tutorial-hidden" data-index="5">æƒ </span>
      </div>
      <div class="tutorial-arrows">
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
        <span>â†‘</span>
      </div>
      <div id="tutorialAdvancedKeys" class="tutorial-keys"></div>
    </div>

    <div style="margin: 16px 0; padding: 12px; background: var(--card-background); border-radius: 4px; font-size: 0.9em;">
      <p style="margin: 0 0 8px 0;" id="tutorialAdvancedComplete" data-i18n="tutorial_advanced_complete"><strong>Completing a verse:</strong></p>
      <p style="margin: 0;" id="tutorialAdvancedSpaced" data-i18n="tutorial_advanced_spaced">When you achieve 90% or higher accuracy on the Advanced stage, the verse will be marked as learned. The spaced repetition system will then remind you to review your learned verses at optimal intervals.</p>
    </div>
    
    <div class="onboarding-options">
      <button id="tutorialAdvancedBegin" class="onboarding-btn" data-i18n="begin">Begin</button>
    </div>
  </div>
</div>
<!-- End Tutorial Modals -->

<!-- Backup Reminder Modal -->
<div id="backupReminderModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h2 data-i18n="backup_reminder_title">âš ï¸ Backup Reminder</h2>
    <p data-i18n="backup_reminder_message">Your verses and progress are stored locally on this device. If you clear your browser data or uninstall the app, all data will be lost. Please export your data regularly as a backup!</p>
    <div style="margin-top: 16px; padding: 12px; background: var(--card-background); border-radius: 4px; font-size: 0.9em;">
      <p style="margin: 0 0 8px 0;"><strong data-i18n="backup_reminder_how">How to backup:</strong></p>
      <p style="margin: 0;" data-i18n="backup_reminder_steps">Go to Export & Import â†’ Download Data â†’ Save the file to a safe location (cloud storage recommended)</p>
    </div>
    <div class="modal-buttons" style="margin-top: 24px;">
      <button id="backupReminderGotItBtn" data-i18n="backup_reminder_got_it">Got it!</button>
      <button id="backupReminderExportBtn" data-i18n="backup_reminder_export_now" style="display: none;">Export Now</button>
    </div>
  </div>
</div>
<!-- End Backup Reminder Modal -->

<!-- Change Interval Modal -->
<div id="changeIntervalModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h3 data-i18n="change_interval_title">Change Review Interval</h3>
    <div class="interval-controls">
      <div class="interval-display">
        <label data-i18n="interval_label">Interval:</label>
        <div class="interval-adjuster">
          <button id="intervalDownBtn" class="interval-btn">â–¼</button>
          <span id="intervalValue" class="interval-value">1</span>
          <button id="intervalUpBtn" class="interval-btn">â–²</button>
        </div>
      </div>
      <div id="intervalDaysDisplay" class="interval-days">Review in 1 Day(s)</div>
    </div>
    <div class="modal-buttons">
      <button id="intervalConfirmBtn" class="confirm-btn">âœ”</button>
      <button id="intervalCancelBtn" data-i18n="cancel">Cancel</button>
    </div>
  </div>
</div>
<!-- End Change Interval Modal -->

<!-- Add Verse Tutorial Modal -->
<div id="addVerseTutorialModal" class="modal" aria-hidden="true">
  <div class="modal-overlay"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <h2 id="addVerseTutorialTitle" data-i18n="add_verse_tutorial_title">How to Add Verses</h2>
    
    <div style="margin: 16px 0; line-height: 1.6;">
      <p id="addVerseTutorialDesc1" data-i18n="add_verse_tutorial_desc1">Verses are added manually so you can use any Bible translation you prefer. Simply copy and paste the Chinese text into the verse field.</p>
      
      <p id="addVerseTutorialDesc2" data-i18n="add_verse_tutorial_desc2" style="margin-top: 12px;">For the initials fields, type one key per character using your chosen input method. This creates the answer key you'll be graded against when learning and reviewing verses.</p>
    </div>
    
    <div style="margin: 20px 0; padding: 16px; background: var(--card-background); border-radius: 8px; border: 1px solid var(--border-color);">
      <h3 style="margin: 0 0 12px 0; font-size: 14px; color: var(--text-secondary);" data-i18n="add_verse_tutorial_example">Example: Ephesians 2:8</h3>
      
      <div style="margin-bottom: 12px;">
        <label style="font-size: 13px; font-weight: 600; color: var(--text-primary); text-align: left; display: block;" data-i18n="chinese_verse_text">Chinese Verse Text</label>
        <div id="addVerseTutorialExampleText" style="margin-top: 4px; padding: 8px; background: white; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; color: #333; text-align: left;">
          ä½ å€‘å¾—æ•‘æ˜¯æœ¬ä¹æ©ï¼Œä¹Ÿå› ç€ä¿¡ï¼›é€™ä¸¦ä¸æ˜¯å‡ºæ–¼è‡ªå·±ï¼Œè€Œæ˜¯ç¥æ‰€è³œçš„ï¼›
        </div>
      </div>
      
      <div>
        <label id="addVerseTutorialInputLabel" data-i18n="pinyin_initials_verse" style="font-size: 13px; font-weight: 600; color: var(--text-primary); text-align: left; display: block;">Pinyin Initials for Verse</label>
        <div id="addVerseTutorialExampleInitials" style="margin-top: 4px; padding: 8px; background: white; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; font-size: 14px; color: #333; text-align: left;">
          nmdjsbheyyzxzbbscyzjessscd
        </div>
      </div>
      
      <p style="margin: 12px 0 0 0; font-size: 12px; color: var(--text-secondary); text-align: left;" id="addVerseTutorialNote">
        <strong>Note:</strong> <span data-i18n="add_verse_tutorial_note">Each Chinese character gets one key, punctuation is skipped.</span>
      </p>
    </div>
    
    <div class="onboarding-options">
      <button id="addVerseTutorialGotIt" class="onboarding-btn" data-i18n="got_it">Got it!</button>
    </div>
  </div>
</div>
<!-- End Add Verse Tutorial Modal -->

<!-- Onscreen Keyboards -->
<div id="zhuyinKeyboard" class="onscreen-keyboard" style="display:none;">
  <div class="keyboard-row">
    <button class="key">ã„…</button>
    <button class="key">ã„†</button>
    <button class="key">ã„‡</button>
    <button class="key">ã„ˆ</button>
    <button class="key">ã„‰</button>
    <button class="key">ã„Š</button>
    <button class="key">ã„‹</button>
    <button class="key">ã„Œ</button>
  </div>
  <div class="keyboard-row">
    <button class="key">ã„</button>
    <button class="key">ã„</button>
    <button class="key">ã„</button>
    <button class="key">ã„</button>
    <button class="key">ã„‘</button>
    <button class="key">ã„’</button>
    <button class="key">ã„“</button>
    <button class="key">ã„”</button>
  </div>
  <div class="keyboard-row">
    <button class="key">ã„•</button>
    <button class="key">ã„–</button>
    <button class="key">ã„—</button>
    <button class="key">ã„˜</button>
    <button class="key">ã„™</button>
    <button class="key">ã„š</button>
    <button class="key">ã„›</button>
    <button class="key">ã„œ</button>
  </div>
  <div class="keyboard-row">
    <button class="key">ã„</button>
    <button class="key">ã„Ÿ</button>
    <button class="key">ã„ </button>
    <button class="key">ã„¡</button>
    <button class="key">ã„¢</button>
    <button class="key">ã„£</button>
    <button class="key">ã„¤</button>
    <button class="key">ã„¥</button>
  </div>
  <div class="keyboard-row">
    <button class="key">ã„¦</button>
    <button class="key">Backspace</button>
    <button class="key">Space</button>
    <button class="key">Enter</button>
  </div>
</div>

<div id="cangjieKeyboard" class="onscreen-keyboard" style="display:none;">
  <div class="keyboard-row">
    <button class="key">æ—¥</button>
    <button class="key">æœˆ</button>
    <button class="key">é‡‘</button>
    <button class="key">æœ¨</button>
    <button class="key">æ°´</button>
    <button class="key">ç«</button>
    <button class="key">åœŸ</button>
    <button class="key">ç«¹</button>
  </div>
  <div class="keyboard-row">
    <button class="key">æˆˆ</button>
    <button class="key">å</button>
    <button class="key">å¤§</button>
    <button class="key">ä¸­</button>
    <button class="key">ä¸€</button>
    <button class="key">å¼“</button>
    <button class="key">äºº</button>
    <button class="key">å¿ƒ</button>
  </div>
  <div class="keyboard-row">
    <button class="key">æ‰‹</button>
    <button class="key">å£</button>
    <button class="key">å°¸</button>
    <button class="key">å»¿</button>
    <button class="key">å±±</button>
    <button class="key">å¥³</button>
    <button class="key">ç”°</button>
    <button class="key">é›£</button>
  </div>
  <div class="keyboard-row">
    <button class="key">åœ</button>
    <button class="key">é‡</button>
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key">Backspace</button>
    <button class="key">Space</button>
  </div>
  <div class="keyboard-row">
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key unused"> </button>
    <button class="key">Enter</button>
  </div>
</div>

<div id="numericKeyboard" class="onscreen-keyboard" style="display:none;">
  <div class="keyboard-row">
    <button class="key">1</button>
    <button class="key">2</button>
    <button class="key">3</button>
  </div>
  <div class="keyboard-row">
    <button class="key">4</button>
    <button class="key">5</button>
    <button class="key">6</button>
  </div>
  <div class="keyboard-row">
    <button class="key">7</button>
    <button class="key">8</button>
    <button class="key">9</button>
  </div>
  <div class="keyboard-row">
    <button class="key">0</button>
    <button class="key">Backspace</button>
    <button class="key">Enter</button>
  </div>
</div>

</body>
</html>